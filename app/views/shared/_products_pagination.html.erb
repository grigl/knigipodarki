<% params[:sort] ? (sort = "&sort=#{params[:sort]}") : (sort = '') %>
<% params[:order] ? (order = "&order=#{params[:order]}") : (order = '') %>

<% unless products.total_pages < 2 %>
  <!-- pagination -->
  <nav class="pagination">
    <ul>
      <% if products.previous_page %>
        <li class="arrow arrow-left"><%= link_to 'e', request.path + "?page=#{products.previous_page}" + sort + order %></li>
        <li><%= link_to '1',  request.path + "?page=1"  + sort + order %></li>
      <% end %>
      <% if products.current_page < products.total_pages + 1 && products.current_page - 3 >= 1 %>
        <li><span>...</span></li>
      <% end %>
      <% if products.current_page  > 2 %>
        <li><%= link_to products.current_page - 1,  request.path + "?page=#{products.current_page - 1}" + sort + order %></li>
      <% end %>
      <li class="current"><%= link_to products.current_page,  request.path + "?page=#{products.current_page}" + sort + order %></li>
      <% if products.current_page < products.total_pages - 1 %>
        <li><%= link_to products.current_page + 1,  request.path + "?page=#{products.current_page + 1}" + sort + order %></li>
      <% end %>
      <% if products.current_page < products.total_pages - 1 && (products.total_pages - products.current_page) > 2 %>
        <li><span>...</span></li>
      <% end %>
      <% if products.current_page < products.total_pages %>
        <li><%= link_to products.total_pages,  request.path + "?page=#{products.total_pages}" + sort + order %></li>
        <li class="arrow arrow-right"><%= link_to 'r',  request.path + "?page=#{products.next_page}" + sort + order %></li>
      <% end %>
    </ul>
  </nav>
  <!-- /.pagination -->
<% end %>